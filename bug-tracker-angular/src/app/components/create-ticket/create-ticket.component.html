

<div class="sidenav">
    <a href="/dashboard">dashboard</a>
    <a href="/projects">Project</a>
    <a href="/ticket">Ticket</a>
</div>

<div class="main">
    <h1>Create A New Ticket</h1>
    <form id="createTicket-form" [formGroup]= "createTicketForm" (ngSubmit)="createTicket()">

        <mat-form-field class="input-width" appearance="fill">
            <mat-label>Ticket Title</mat-label>
            <input matInput formControlName="title" id="title">
        </mat-form-field>
    
        <div *ngIf="createTicketForm.controls['title'].invalid && (createTicketForm.controls['title'].dirty || createTicketForm.controls['title'].touched)" class="alert">
        <div *ngIf="createTicketForm.controls['title'].errors?.['required']">
          Please enter ticket title
        </div>
        <div *ngIf="createTicketForm.controls['title'].errors?.['minlength']">
          Ticket title must be at least 4 characters long
        </div>
        <div *ngIf="createTicketForm.controls['title'].errors?.['maxlength']">
          Ticket title cannot be more than 20 characters long
        </div>
        <div *ngIf="createTicketForm.controls['title'].errors?.['onlywhitespace']">Title can not contain just spaces</div>
        </div>
        <br><br>

      <mat-form-field class="input-width" appearance="fill" >
          <mat-label>Description</mat-label>
          <input matInput formControlName="description" id="description">
      </mat-form-field>

        <div *ngIf="createTicketForm.controls['description'].invalid && (createTicketForm.controls['description'].dirty || createTicketForm.controls['description'].touched)" class="alert">
          <div *ngIf="createTicketForm.controls['description'].errors?.['required']">
            Please enter ticket description
          </div>
          <div *ngIf="createTicketForm.controls['description'].errors?.['minlength']">
            Ticket description must be at least 4 characters long
          </div>
          <div *ngIf="createTicketForm.controls['description'].errors?.['maxlength']">
            Ticket description cannot be more than 100 characters long
          </div>
          <div *ngIf="createTicketForm.controls['description'].errors?.['onlywhitespace']">Description can not contain just spaces</div>
        </div>
        <br><br>
      <!-- <div id="errorU" class="error" hidden>I'm an error</div> -->

      <mat-form-field appearance="fill" class="input-width">
        <mat-label>Priority</mat-label>
        <mat-select formControlName="priority" id="priority">
          <mat-option value="1">1 (less important)</mat-option>
          <mat-option value="2">2 (medium important)</mat-option>
          <mat-option value="3">3 (most important)</mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="createTicketForm.controls['priority'].invalid && (createTicketForm.controls['priority'].dirty || createTicketForm.controls['priority'].touched)" class="alert">
        <div *ngIf="createTicketForm.controls['priority'].errors?.['required']">
          Please choose ticket priority
        </div>
      </div>
      <br><br>

      <mat-form-field class="input-width" appearance="fill">
        <mat-label>Error Type</mat-label>
        <input type="text"
               aria-label="Error Type"
               matInput
               [matAutocomplete]="auto"
               formControlName="errorType" 
               id="errorType">
        <mat-autocomplete autoActiveFirstmat-option #auto="matAutocomplete">
            <mat-option value="Functional errors">Functional errors</mat-option>
            <mat-option value='Performance defects'>Performance defects</mat-option>
            <mat-option value='Usability defects'>Usability defects</mat-option>
            <mat-option value='Compatibility defects'>Compatibility defects</mat-option>
            <mat-option value='Security defects'>Security defects</mat-option>
            <mat-option value='Syntax errors'>Syntax errors</mat-option>
            <mat-option value='Logic errors'>Logic errors</mat-option>
            <mat-option value='Unit-level bugs'>Unit-level bugs</mat-option>
            <mat-option value='System-level integration bugs'>System-level integration bugs</mat-option>
            <mat-option value='Code Duplication'>Code Duplication</mat-option>
            <mat-option value='Data Type Mismatch'>Data Type Mismatch</mat-option>
        </mat-autocomplete>
      </mat-form-field>
    
      <div *ngIf="createTicketForm.controls['errorType'].invalid && (createTicketForm.controls['errorType'].dirty || createTicketForm.controls['errorType'].touched)" class="alert">
        <div *ngIf="createTicketForm.controls['errorType'].errors?.['required']">
          Please enter ticket errorType
        </div>
        <div *ngIf="createTicketForm.controls['errorType'].errors?.['minlength']">
          Ticket errorType must be at least 4 characters long
        </div>
        <div *ngIf="createTicketForm.controls['errorType'].errors?.['maxlength']">
          Ticket errorType cannot be more than 20 characters long
        </div>
        <div *ngIf="createTicketForm.controls['errorType'].errors?.['onlywhitespace']">ErrorType can not contain just spaces</div>
      </div>
      <br><br>

      <mat-form-field appearance="fill" class="input-width">
        <mat-label>Project</mat-label>
        <mat-select formControlName="project" id="project">
          <mat-option value="p1">Static Project 1</mat-option>
          <mat-option value="p2">Static Project 2</mat-option>
          <mat-option value="p3">Static Project 3</mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="createTicketForm.controls['project'].invalid && (createTicketForm.controls['project'].dirty || createTicketForm.controls['project'].touched)" class="alert">
        <div *ngIf="createTicketForm.controls['project'].errors?.['required']">
          Please choose ticket priority
        </div>
      </div>

    <br><br>
    <div id="buttons">
      <button mat-raised-button color="primary" type="submit" [disabled]="!createTicketForm.valid">Submit</button>
      &nbsp;&nbsp;&nbsp;
      <button mat-raised-button color="primary" type="reset">Clear</button>
    </div>      
    </form>

</div>

